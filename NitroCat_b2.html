<title>NitroCat - Run Scratch Project Offline</title>
<meta charset="UTF-8">
<html lang="en-us">
<head>
<meta charset="UTF-8">
<style>
    body {
      margin: 0;
      display: flex;
      height: 100vh;
      font-family: sans-serif;
    }


    /* 左のブロックパレット */
    #palette {
      width: 200px;
      background: #f5f5f5;
      padding: 10px;
      border-right: 2px solid #ccc;
    }


    /* ワークスペース */
    #workspace {
      flex-grow: 1; 
      position: relative;
      background: #e0f7fa;
      overflow: hidden;
    }


    .block {
      background: #ffca28;
      border: 2px solid #f57f17;
      padding: 10px;
      margin-bottom: 10px;
      cursor: grab;
      width: fit-content;
      border-radius: 6px;
      user-select: none;
    }


    .draggable {
      position: absolute;
    }
  </style>
</head>
<body>


  <!-- ブロック一覧 -->
  <div id="palette">
    <div class="block" draggable="true" data-type="move">動かす 10 歩</div>
    <div class="block" draggable="true" data-type="turn">右に 15 度回す</div>
  </div>


  <!-- ワークスペース -->
  <div id="workspace"></div>


  <script>
    const palette = document.getElementById('palette');
    const workspace = document.getElementById('workspace');


    let draggedBlock = null;


    palette.querySelectorAll('.block').forEach(block => {
      block.addEventListener('dragstart', e => {
        draggedBlock = block;
      });
    });


    workspace.addEventListener('dragover', e => {
      e.preventDefault();
    });


    workspace.addEventListener('drop', e => {
      e.preventDefault();
      if (!draggedBlock) return;


      const newBlock = draggedBlock.cloneNode(true);
      newBlock.classList.add('draggable');


      newBlock.style.left = e.offsetX + 'px';
      newBlock.style.top = e.offsetY + 'px';


      makeDraggable(newBlock);
      workspace.appendChild(newBlock);
    });


    function makeDraggable(block) {
      let offsetX, offsetY;
      block.addEventListener('mousedown', e => {
        offsetX = e.offsetX;
        offsetY = e.offsetY;
        function mouseMoveHandler(ev) {
          block.style.left = (ev.pageX - workspace.offsetLeft - offsetX) + 'px';
          block.style.top = (ev.pageY - workspace.offsetTop - offsetY) + 'px';
        }
        function mouseUpHandler() {
          document.removeEventListener('mousemove', mouseMoveHandler);
          document.removeEventListener('mouseup', mouseUpHandler);
        }
        document.addEventListener('mousemove', mouseMoveHandler);
        document.addEventListener('mouseup', mouseUpHandler);
      });
    }
  </script>


</body>
</html>